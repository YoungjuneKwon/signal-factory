# 프로젝트 기획서 초안

프로젝트명: signal-factory

개요
- 시계열(시간순) 데이터 입력을 받아 주어진 로직에 따라 매매 진입(Entry) / 청산(Exit) 신호를 생성하고, 생성된 신호에 따라 가상 및 실제 거래를 수행하는 프레임워크를 구축한다.

핵심 목표
- 유연한 트레이딩 로직 적용: 사용자 정의 로직(데이터베이스 DML 또는 JavaScript 라이브러리 형태)을 손쉽게 추가/교체 가능
- 시뮬레이션과 실거래 분리: 동일한 신호를 가상 시뮬레이션으로 검증한 후 실제 거래 연결
- 보안·격리: 외부 시스템과 로직 실행을 분리하여 보안 문제를 해소
- 테스트·재현성: 백테스트와 포워드 테스트가 가능하도록 데이터와 로직의 버전 관리

주요 기능
1) 데이터 입력
- 입력 포맷: CSV, Parquet, JSONL, 혹은 스트리밍(예: Kafka) 지원
- 타임스탬프, OHLCV(시가/고가/저가/종가/거래량) 표준 컬럼 권장
- 전처리: 결측치 처리, 리샘플링, 타임존 표준화

2) 신호 생성 로직
- 로직 인터페이스: 명확한 입력(타임시리즈 스냅샷), 출력(ENTRY/EXIT/NOOP, 포지션 사이즈, 메타데이터) 규격 정의
- 로직 제공 방식: SQL/DML(예: 저장 프로시저) 또는 JavaScript(또는 TypeScript) 라이브러리 형태로 로직 제공
- 로직은 단일 책임 원칙을 따르도록 권장

3) 트레이딩 엔진
- 시뮬레이터: 과거 데이터로 가상 주문을 생성하고 PnL·슬리피지·수수료 등을 계산
- 브로커 어댑터: 실제 거래를 위해 외부 거래소/브로커 API와 연동(추상화 계층 제공)
- 주문 유형: 시장가, 지정가, IOC 등 기본 주문 지원

4) 보안 및 격리
- 로직 실행 격리: 컨테이너(예: Firecracker, gVisor) 또는 프로세스 격리를 통해 사용자 로직을 실행
- 네트워크/파일시스템 제한: 실행 환경에 최소 권한만 부여
- 서명된 패키지만 허용 또는 샌드박스 검증 파이프라인 도입

5) 운영·모니터링
- 로깅: 신호 발생 로그, 주문 로그, 에러 로그 분리 저장
- 지표: 수익률, 최대 낙폭, 샤프비율 등 백테스트 리포트 자동 생성
- 알림: 주요 에러·거래 이상 발생 시 알림(예: Slack, Email)

6) 개발 경험
- 로컬 개발용 시뮬레이터 및 샘플 데이터 제공
- 로직 개발용 템플릿(DML 예제, JavaScript 예제) 제공
- CI: lint, format, 테스트(유닛/통합/백테스트) 자동화

데이터·로직 인터페이스 예시
- 입력: [{timestamp: ISO, open, high, low, close, volume, ...context}]
- 출력: {signal: "ENTRY"|"EXIT"|"NONE", size: number, reason?: string, metadata?: {...}}

초기 기술 스택 제안
- 언어: Node.js(Logic SDK), Python(백테스트·데이터 처리), TypeScript 권장
- 저장소: Postgres(메타데이터), S3(원시·백테스트 데이터), Redis(실시간 상태)
- 컨테이너: Docker, 리소스 격리를 위한 추가 솔루션 권장
- CI: GitHub Actions

로드맵(단계별)
1. 초기 설계 및 프로젝트 구조화(이번 스텝)
2. 데이터 입력 파이프라인과 샘플 데이터 준비
3. 로직 인터페이스와 샘플 DML/JS 템플릿 제공
4. 시뮬레이터 구현 및 간단한 전략으로 백테스트
5. 브로커 어댑터 프로토타입 및 실거래 연동
6. 보안 격리 강화 및 운영 배포

초기 작업 리스트(우선순위)
- 저장소 초기화 및 기본 문서 추가 (PROJECT_PLAN.md, PROMPT.md)
- 샘플 데이터셋 추가(samples/)
- 로직 템플릿 추가(templates/logic_sql.sql, templates/logic_js.js)
- GitHub Actions 기본 워크플로(lint, test)

리스크 및 고려사항
- 실제 거래 연결 시 자금·법적 리스크 발생: 시범계정(페이퍼) 우선 적용
- 사용자 제공 로직의 악의적 동작: 철저한 샌드박스와 권한 제한 필요

참고: 이 문서는 초기 기획서 초안입니다. 세부 설계·아키텍처는 이후 기술 토론을 통해 확정합니다.
